@(title: String, sources: List[Map[String, String]])

@main(title) {

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1 class="display-4 text-primary mb-4">@title</h1>
                <p class="lead mb-4">Browse available news sources by category, country, or language.</p>
                
                <!-- Filter Options -->
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Filter Sources</h5>
                        <div class="row">
                            <div class="col-md-3">
                                <label for="categoryFilter" class="form-label">Category</label>
                                <select class="form-select" id="categoryFilter">
                                    <option value="">All Categories</option>
                                    <option value="general">General</option>
                                    <option value="sports">Sports</option>
                                    <option value="technology">Technology</option>
                                    <option value="business">Business</option>
                                    <option value="entertainment">Entertainment</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="countryFilter" class="form-label">Country</label>
                                <select class="form-select" id="countryFilter">
                                    <option value="">All Countries</option>
                                    <option value="us">United States</option>
                                    <option value="gb">United Kingdom</option>
                                    <option value="ca">Canada</option>
                                    <option value="au">Australia</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="languageFilter" class="form-label">Language</label>
                                <select class="form-select" id="languageFilter">
                                    <option value="">All Languages</option>
                                    <option value="en">English</option>
                                    <option value="es">Spanish</option>
                                    <option value="fr">French</option>
                                    <option value="de">German</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">&nbsp;</label>
                                <button class="btn btn-outline-secondary w-100" onclick="clearFilters()">
                                    <i class="fas fa-times"></i> Clear Filters
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sources List -->
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Available Sources (@sources.size() total)</h5>
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="viewAs('grid')">
                                <i class="fas fa-th"></i> Grid
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="viewAs('list')">
                                <i class="fas fa-list"></i> List
                            </button>
                        </div>
                    </div>
                    <div class="card-body" id="sourcesContainer">
                        <div class="row" id="sourcesGrid">
                            @for(source <- sources) {
                                <div class="col-md-6 col-lg-4 mb-3 source-item" 
                                     data-category="@source.get("category")" 
                                     data-country="@source.get("country")" 
                                     data-language="@source.get("language")">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <h6 class="card-title text-primary">@source.get("name")</h6>
                                            <div class="mb-2">
                                                <span class="badge bg-secondary me-1">@source.get("category").toUpperCase()</span>
                                                <span class="badge bg-info me-1">@source.get("country").toUpperCase()</span>
                                                <span class="badge bg-success">@source.get("language").toUpperCase()</span>
                                            </div>
                                            <p class="card-text text-muted small">
                                                This is a mock news source. In the real implementation, this would show actual source information from the News API.
                                            </p>
                                        </div>
                                        <div class="card-footer">
                                            <button class="btn btn-outline-primary btn-sm w-100" onclick="viewSource('@source.get("name")')">
                                                <i class="fas fa-eye"></i> View Details
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        .source-item {
            transition: all 0.3s ease;
        }
        
        .source-item:hover {
            transform: translateY(-2px);
        }
        
        .card {
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .badge {
            font-size: 0.7em;
        }
    </style>

    <script>
        function clearFilters() {
            document.getElementById('categoryFilter').value = '';
            document.getElementById('countryFilter').value = '';
            document.getElementById('languageFilter').value = '';
            filterSources();
        }
        
        function filterSources() {
            const category = document.getElementById('categoryFilter').value;
            const country = document.getElementById('countryFilter').value;
            const language = document.getElementById('languageFilter').value;
            
            const sources = document.querySelectorAll('.source-item');
            sources.forEach(source => {
                const sourceCategory = source.getAttribute('data-category');
                const sourceCountry = source.getAttribute('data-country');
                const sourceLanguage = source.getAttribute('data-language');
                
                const categoryMatch = !category || sourceCategory === category;
                const countryMatch = !country || sourceCountry === country;
                const languageMatch = !language || sourceLanguage === language;
                
                if (categoryMatch && countryMatch && languageMatch) {
                    source.style.display = 'block';
                } else {
                    source.style.display = 'none';
                }
            });
        }
        
        function viewAs(type) {
            const container = document.getElementById('sourcesContainer');
            if (type === 'list') {
                container.innerHTML = container.innerHTML.replace(/col-md-6 col-lg-4/g, 'col-12');
            } else {
                container.innerHTML = container.innerHTML.replace(/col-12/g, 'col-md-6 col-lg-4');
            }
        }
        
        function viewSource(sourceName) {
            alert('Viewing details for: ' + sourceName + '\n\nThis would show detailed source information in a modal or separate page.');
        }
        
        // Add event listeners for filters
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('categoryFilter').addEventListener('change', filterSources);
            document.getElementById('countryFilter').addEventListener('change', filterSources);
            document.getElementById('languageFilter').addEventListener('change', filterSources);
        });
    </script>
}
